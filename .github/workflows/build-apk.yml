name: Build Debug APK
on:
 push:
 branches: [ main, master ]
 workflow_dispatch:
jobs:
 build:
 runs-on: ubuntu-latest
 steps:
 - name: Checkout
 uses: actions/checkout@v4
- name: Set up JDK 17
  uses: actions/setup-java@v4
  with:
    distribution: temurin
    java-version: '17'

- name: Write secrets file
  run: |
    mkdir -p app
    cat > app/secrets.properties <<EOS
groq=${{ secrets.GROQ_KEY }}
weather=${{ secrets.WEATHER_KEY }}
EOS
- name: Build with Gradle (assembleDebug)
  uses: gradle/gradle-build-action@v2
  with:
    arguments: assembleDebug

- name: Upload APK artifact
  uses: actions/upload-artifact@v4
  with:
    name: smarteyex-debug-apk
    path: app/build/outputs/**/*.apk
